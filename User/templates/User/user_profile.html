{% extends 'Blog/base.html' %}

{% block title %}Profile{% endblock %}

{% block content %}

<!-- Header card -->
<div class="special card">
	<!-- Header -->
	<div class="header">
		<div class="heading">"{{ user.username }}"</div>
		<div class="subheading">That's your identity here on Corkran.</div>
	</div>

	<!-- Content -->
	<div class="text">Manage and view your personal details here.</div>
</div>


<!-- Profile update container -->
<fieldset class="card">
	<!-- Heading -->
	<legend class="heading">Profile</legend>

	<form class="vertically-space-items" method="post" enctype="multipart/form-data">{% csrf_token %}
		<!-- User info update form -->
		{{ user_form.as_table }}

		<!-- Profile update form -->
		{{ profile_form.as_table }}

		<!-- Submit button -->
		<div class="right-align-container">
			<button class="button" type="submit">Update</button>
		</div>
	</form>
</fieldset>


<!-- Articles by user -->
<fieldset class="card">
	<!-- Heading -->
	<legend class="heading">Articles</legend>

	<div class="vertically-space-items">
		<!-- Subheading -->
		<div class="subheading closer-below">Your articles on Corkran.</div>

		<!-- Articles list -->
		<div class="list-box generous-spacing">
			{% for article in articles %}
			<a class="unformatted single-line-text minimal card" href="{{ article.get_absolute_url }}">
				<span class="montserrat">"{{ article.title }}"</span>
			</a>
			{% endfor %}
		</div>
	</div>
</fieldset>


<!-- Tags -->
<fieldset class="card">
	<!-- Heading -->
	<legend class="heading">Tags</legend>
	
	<div class="vertically-space-items">
		<!-- Subheading -->
		<div class="subheading closer-below">All the tags you have on your articles.</div>

		<!-- Tags list -->
		<div class="list-box compact-spacing">
			{% for tag in tags %}
			<a class="single-line-text tag" href="{% url 'tag-sorted-articles' tag %}">{{ tag }}</a>
			{% endfor %}
		</div>
	</div>
</fieldset>


<!-- Change password container -->
<fieldset class="card">
	<!-- Heading -->
	<legend class="heading">Password</legend>

	<form class="vertically-space-items" method="post">{% csrf_token %}
		<!-- Password form -->
		{{ password_form.as_table }}

		<!-- Submit button -->
		<div class="right-align-container">
			<button class="button" type="submit" name="change_password">Update Password</button>
		</div>
	</form>
</fieldset>


<!-- Account deletion container -->
<fieldset class="card">
	<!-- Heading -->
	<legend class="heading">Danger!</legend>

	<a href="{% url 'delete-user' user.id %}" class="danger button">Delete Account</a>
</fieldset>

{% endblock %}